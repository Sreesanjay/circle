import{m as u,j as e,r as c,i as o,Q as n,A as p}from"./index-m-eWRAVj.js";import{M as j,L as g}from"./ManageAccSidebar-mpWWgI4I.js";import{M as f,B as h}from"./Toast-KVdhVArs.js";import"./index.esm-5AkatTaU.js";import"./Menu-ML_fOrjv.js";import"./index.esm-IW_VCk-f.js";function y({user:r,removeCloseFriend:l}){const i=u();return e.jsx("div",{className:"user-profile-card shadow-md ",style:{width:"230px"},children:e.jsxs("div",{className:"close-friend-card bg-gray-900 rounded-md flex flex-col items-center w-56 shadow-md p-3",children:[e.jsx("div",{className:"header w-32 rounded-md mb-3 hover:scale-105",onClick:()=>i(`/view-profile/${r.user_id}`),children:r.profile_img?e.jsx("img",{src:r.profile_img,alt:"",className:"rounded-lg"}):e.jsx("h1",{className:"text-9xl text-center absolute bottom-20 left-16",children:r.email[0]})}),e.jsx("h1",{className:"mb-5",children:r.username}),e.jsx("button",{className:"bg-white text-primary px-5 py-1 rounded-md hover:bg-slate-100",onClick:()=>l(r.user_id),children:"Remove"})]})})}function w({openModal:r,setOpenModal:l}){const[i,d]=c.useState();c.useEffect(()=>{(async()=>{try{const s=await o.get("/users/get-following",{withCredentials:!0});s.data&&d(s.data.userList)}catch(s){const a=s;n.error(a.message)}})()},[r]);async function m(s){try{const a=await o.post("/users/add-closefriend",{id:s},{withCredentials:!0});a.data&&(n(a.data.message),d(t=>t==null?void 0:t.filter(x=>x.user_id!==s)))}catch(a){const t=a;n.error(t.message)}}return e.jsxs(f,{show:r,size:"md",onClose:()=>{d([]),l(!1)},children:[e.jsx(f.Header,{children:"Add Close Friends"}),e.jsxs(f.Body,{children:[e.jsx("h1",{className:"mb-7",children:"Your followings"}),i==null?void 0:i.map(s=>e.jsxs("div",{className:"mb-5 flex justify-between",children:[e.jsxs("div",{className:"left flex gap-3",children:[s.profile_img?e.jsx("img",{src:s.profile_img,alt:"",className:"w-10 rounded-md"}):e.jsx("h1",{className:"p-2 px-4 rounded-md bg-gray-400",children:s.email[0].toUpperCase()}),e.jsxs("div",{className:"name",children:[e.jsx("h1",{children:s.username}),e.jsx("p",{className:"text-sm text-gray-600",children:s.fullname})]})]}),e.jsx("div",{className:"button",children:e.jsx("button",{className:"bg-primary hover:bg-primary-hover p-1 px-5 rounded-md",onClick:()=>m(s.user_id),children:"Add"})})]},s.user_id))]})]})}function A(){const[r,l]=c.useState([]),[i,d]=c.useState(!1);async function m(s){try{const a=await o.delete(`/users/close-friend/${s}`,{withCredentials:!0});a.data&&(n(a.data.message),l(t=>t.filter(x=>x.user_id!==s)))}catch(a){const t=a;n.error(t.message)}}return c.useEffect(()=>{(async()=>{try{const s=await o.get("/users/close-friends",{withCredentials:!0});s.data&&l(s.data.userList)}catch(s){const a=s;n.error(a.message)}})()},[i]),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(j,{}),e.jsxs("div",{className:"px-5 sm:ms-64",children:[e.jsxs("div",{className:"header w-full flex justify-between items-center",children:[e.jsx(h,{"aria-label":"Default breadcrumb example",children:e.jsx(h.Item,{icon:g,children:"Close Friends"})}),e.jsx("div",{onClick:()=>d(!0),children:e.jsx(p,{size:45})}),e.jsx(w,{openModal:i,setOpenModal:d})]}),r.length===0?e.jsxs("div",{className:"w-full h-96 flex flex-col justify-center items-center",children:[e.jsx("img",{src:"https://icons.veryicon.com/png/o/business/financial-category/no-data-6.png",alt:"",className:"w-36"}),e.jsx("h1",{className:"text-gray-400",children:"No close friends found"})]}):e.jsx("div",{className:"close-friends py-5 flex gap-3 flex-wrap justify-center sm:justify-start",children:r&&r.map(s=>e.jsx(y,{user:s,removeCloseFriend:m}))})]})]})}export{A as default};
