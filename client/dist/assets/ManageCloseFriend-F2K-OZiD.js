import{j as e,ai as p,r as c,i as o,Q as d,A as j}from"./index-AlnpICX-.js";import{M as u,L as g}from"./ManageAccSidebar-vn0dnhG4.js";import{M as h,B as f}from"./Toast-gwQzg9lN.js";import"./index.esm-FIJ0PoMy.js";import"./Menu-5GrriLQx.js";import"./index.esm-NDHy72TF.js";function b({user:r,removeCloseFriend:i}){return e.jsxs("div",{className:"user-profile-card shadow-md",style:{width:"230px"},children:[e.jsx("button",{className:"mail",children:e.jsx(p,{size:25})}),e.jsx("div",{className:"profile-pic",children:r.profile_img?e.jsx("img",{src:r.profile_img,alt:""}):e.jsx("h1",{className:"text-9xl text-center absolute bottom-20 left-16",children:r.email[0]})}),e.jsxs("div",{className:"bottom bg-primary",children:[e.jsxs("div",{className:"content",children:[e.jsx("h1",{className:"name",children:r.username}),e.jsx("span",{className:"text-white text-sm",children:r.fullname}),e.jsx("div",{className:"buttons py-5",children:e.jsx("button",{className:"bg-white text-primary px-5 py-1 rounded-md hover:bg-slate-100",onClick:()=>i(r.user_id),children:"Remove"})})]}),e.jsx("div",{className:"bottom-bottom",children:e.jsx("div",{className:"username w-full flex  justify-center",children:e.jsx("h1",{className:"text-2xl text-white",children:r.username})})})]})]})}function N({openModal:r,setOpenModal:i}){const[l,n]=c.useState();c.useEffect(()=>{(async()=>{try{const s=await o.get("/users/get-following",{withCredentials:!0});s.data&&n(s.data.userList)}catch(s){const a=s;d.error(a.message)}})()},[r]);async function m(s){try{const a=await o.post("/users/add-closefriend",{id:s},{withCredentials:!0});a.data&&(d(a.data.message),n(t=>t==null?void 0:t.filter(x=>x.user_id!==s)))}catch(a){const t=a;d.error(t.message)}}return e.jsxs(h,{show:r,size:"md",onClose:()=>{n([]),i(!1)},children:[e.jsx(h.Header,{children:"Add Close Friends"}),e.jsxs(h.Body,{children:[e.jsx("h1",{className:"mb-7",children:"Your followings"}),l==null?void 0:l.map(s=>e.jsxs("div",{className:"mb-5 flex justify-between",children:[e.jsxs("div",{className:"left flex gap-3",children:[s.profile_img?e.jsx("img",{src:s.profile_img,alt:"",className:"w-10 rounded-md"}):e.jsx("h1",{className:"p-2 px-4 rounded-md bg-gray-400",children:s.email[0].toUpperCase()}),e.jsxs("div",{className:"name",children:[e.jsx("h1",{children:s.username}),e.jsx("p",{className:"text-sm text-gray-600",children:s.fullname})]})]}),e.jsx("div",{className:"button",children:e.jsx("button",{className:"bg-primary hover:bg-primary-hover p-1 px-5 rounded-md",onClick:()=>m(s.user_id),children:"Add"})})]},s.user_id))]})]})}function A(){const[r,i]=c.useState([]),[l,n]=c.useState(!1);async function m(s){try{const a=await o.delete(`/users/close-friend/${s}`,{withCredentials:!0});a.data&&(d(a.data.message),i(t=>t.filter(x=>x.user_id!==s)))}catch(a){const t=a;d.error(t.message)}}return c.useEffect(()=>{(async()=>{try{const s=await o.get("/users/close-friends",{withCredentials:!0});s.data&&i(s.data.userList)}catch(s){const a=s;d.error(a.message)}})()},[l]),e.jsxs(e.Fragment,{children:[e.jsx(u,{}),e.jsxs("div",{className:"px-5 ms-64",children:[e.jsxs("div",{className:"header w-full flex justify-between items-center",children:[e.jsx(f,{"aria-label":"Default breadcrumb example",children:e.jsx(f.Item,{icon:g,children:"Close Friends"})}),e.jsx("div",{onClick:()=>n(!0),children:e.jsx(j,{size:45})}),e.jsx(N,{openModal:l,setOpenModal:n})]}),e.jsx("div",{className:"close-friends py-5 flex gap-3 flex-wrap",children:r&&r.map(s=>e.jsx(b,{user:s,removeCloseFriend:m}))})]})]})}export{A as default};
