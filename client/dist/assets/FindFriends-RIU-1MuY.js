import{r as n,i as c,Q as a,j as e,P as x}from"./index-smUx3BSe.js";import{B as h}from"./Toast-nm33oYh4.js";import{b as u}from"./index.esm-MxRIW45I.js";import{H as g}from"./HomeSidebar-hnKdVGxK.js";import"./index.esm-1U0CRIgX.js";import"./Menu-cs__0NOm.js";import"./index.esm-KorUQRPF.js";import"./index.esm-hH7rEle7.js";function C(){const[d,i]=n.useState([]),[p,o]=n.useState([]);n.useEffect(()=>{(async()=>{try{const s=await c.get("/users",{withCredentials:!0});s.data&&(i(s.data.suggestion),o(s.data.userList))}catch(s){const l=s;a.error(l.message)}})()},[]);function m(s){(async()=>{try{const l=await c.post("/users",{id:s},{withCredentials:!0});l.data&&(a(l.data.message),i(t=>t.map(r=>(r.user_id===s&&(r.followed=!0),r))),o(t=>t.map(r=>(r.user_id===s&&(r.followed=!0),r))))}catch(l){const t=l;a.error(t.message)}})()}function f(s){(async()=>{try{const l=await c.post("/users/unfollow",{id:s},{withCredentials:!0});l.data&&(a(l.data.message),i(t=>t.map(r=>(r.user_id===s&&(r.followed=!1),r))),o(t=>t.map(r=>(r.user_id===s&&(r.followed=!1),r))))}catch(l){const t=l;a.error(t.message)}})()}return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(g,{}),e.jsxs("div",{className:"section md:ms-80 p-5",children:[e.jsx(h,{"aria-label":"Default breadcrumb example",children:e.jsx(h.Item,{href:"#",icon:u,children:"Find Friends"})}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"my-3",children:"Suggestions for you"}),e.jsx("section",{className:"suggested-for-you flex gap-5 py-5 flex-wrap justify-center sm:justify-start",children:d.map(s=>e.jsxs("div",{className:"friend-card bg-gray-900 rounded-md flex flex-col items-center w-56 shadow-md p-3",children:[e.jsx("div",{className:"header w-32 rounded-md mb-3",children:s.profile_img?e.jsx("img",{src:s.profile_img,alt:"",className:"rounded-lg"}):e.jsx(x,{email:(s==null?void 0:s.email)||"",size:"large"})}),e.jsx("h1",{children:s.username}),e.jsxs("div",{className:"connections_details w-full flex justify-between py-3",children:[e.jsxs("div",{className:"followers flex flex-col items-center justify-center text-sm",children:[e.jsx("h1",{children:s.followers}),e.jsx("span",{className:"text-sm",children:"followers"})]}),e.jsxs("div",{className:"following text-sm flex flex-col items-center justify-center",children:[e.jsx("h1",{children:s.following}),e.jsx("span",{className:"text-sm",children:"following"})]})]}),s.followed?e.jsx("button",{className:"btn bg-primary p-2 px-8 rounded-md text-white hover:bg-primary-hover",onClick:()=>f(s.user_id),children:"Unfollow"}):e.jsx("button",{className:"btn bg-primary p-2 px-8 rounded-md text-white hover:bg-primary-hover",onClick:()=>m(s.user_id),children:"Follow"})]}))})]}),e.jsx("h1",{className:"my-5",children:"People You may know"}),e.jsx("section",{className:"suggested-for-you flex gap-5 py-5 flex-wrap justify-center sm:justify-start",children:p.map(s=>e.jsxs("div",{className:"friend-card bg-gray-900 rounded-md flex flex-col items-center w-56 shadow-md p-3",children:[e.jsx("div",{className:"header w-32 rounded-md mb-3",children:s.profile_img?e.jsx("img",{src:s.profile_img,alt:"",className:"rounded-lg"}):e.jsx(x,{email:(s==null?void 0:s.email)||"",size:"large"})}),e.jsx("h1",{children:s.username}),e.jsxs("div",{className:"connections_details w-full flex justify-between py-3",children:[e.jsxs("div",{className:"followers flex flex-col items-center justify-center text-sm",children:[e.jsx("h1",{children:s.followers}),e.jsx("span",{className:"text-sm",children:"followers"})]}),e.jsxs("div",{className:"following text-sm flex flex-col items-center justify-center",children:[e.jsx("h1",{children:s.following}),e.jsx("span",{className:"text-sm",children:"following"})]})]}),s.followed?e.jsx("button",{className:"btn bg-primary p-2 px-8 rounded-md text-white hover:bg-primary-hover",onClick:()=>f(s.user_id),children:"Unfollow"}):e.jsx("button",{className:"btn bg-primary p-2 px-8 rounded-md text-white hover:bg-primary-hover",onClick:()=>m(s.user_id),children:"Follow"})]}))})]})]})}export{C as default};
