import{r as a,a as y,u as S,aa as E,ab as f,Q as v,j as s,L as C}from"./index-m-eWRAVj.js";import{B as x,A as P,H as A}from"./Toast-KVdhVArs.js";import{M as F}from"./ManageAccSidebar-mpWWgI4I.js";import{M}from"./index.esm-IW_VCk-f.js";import{u as i}from"./formValidate-Cjawh5Gv.js";import"./index.esm-5AkatTaU.js";import"./Menu-ML_fOrjv.js";function k(){const[t,h]=a.useState(""),[d,j]=a.useState(""),[b,N]=a.useState(""),[m,p]=a.useState(!1),[e,w]=a.useState({old_password:"",new_password:"",confirm_password:""}),o=y(),{isLoading:g,isSuccess:u,isError:l,errorMessage:n,status:c}=S(r=>r.auth);function _(){w({...e,old_password:i("password",t),new_password:i("password",d),confirm_password:i("password",b)}),d===t&&w({...e,new_password:"Old password and new password cannot be same"}),p(!0)}return a.useEffect(()=>{m&&!e.old_password&&!e.new_password&&!e.confirm_password&&(o(E({old_password:t,new_password:d})),p(!1))},[m,e,d,o,t]),a.useEffect(()=>{u&&o(f()),l&&c!==406&&(o(f()),v.error(n))},[o,l,u,n,c]),s.jsx(s.Fragment,{children:g?s.jsx(C,{}):s.jsxs("section",{className:"password-security flex flex-col",children:[s.jsx(F,{}),s.jsxs("div",{className:"preference p-5 m-0 sm:ms-64 pt-5",children:[s.jsx(x,{"aria-label":"Default breadcrumb example",children:s.jsx(x.Item,{href:"#",icon:M,children:"Password And Security"})}),s.jsxs("section",{className:"reset-password",children:[s.jsx("h1",{className:"reset-password my-5 font-medium",children:"Reset Password"}),s.jsxs("form",{action:"",className:"sm:w-1/2",children:[l&&c===406?s.jsxs(P,{color:"failure",icon:A,children:[s.jsx("span",{className:"font-medium",children:"Alert!"})," ",n]}):null,s.jsxs("div",{className:"form-group flex flex-col mb-5",children:[s.jsx("label",{htmlFor:"",className:"mb-3",children:"Old password"}),s.jsx("input",{type:"password",name:"old_password",autoComplete:"off",onChange:r=>h(r.target.value),placeholder:"Enter your old password",className:"rounded-lg"})]}),s.jsxs("div",{className:"form-group flex flex-col mb-5",children:[s.jsx("label",{htmlFor:"",className:"mb-3",children:"New password"}),e.new_password&&s.jsx("span",{className:"text-red-600 text-sm",children:e.new_password}),s.jsx("input",{type:"password",name:"new_password",onChange:r=>j(r.target.value),placeholder:"Enter your old password",className:"rounded-lg"})]}),s.jsxs("div",{className:"form-group flex flex-col mb-5",children:[s.jsx("label",{htmlFor:"",className:"mb-3",children:"Confirm password"}),e.confirm_password&&s.jsx("span",{className:"text-red-600 text-sm",children:e.confirm_password}),s.jsx("input",{type:"password",name:"confirm_password",onChange:r=>N(r.target.value),placeholder:"Enter your old password",className:"rounded-lg"})]}),s.jsxs("div",{className:"btn-container flex",children:[s.jsx("button",{className:"bg-red-600 p-2 px-4 rounded-lg",type:"reset",children:"Reset"}),s.jsx("button",{className:"bg-primary p-2 px-4 rounded-lg ms-3",type:"button",onClick:_,children:"Submit"})]})]})]})]})]})})}export{k as default};
