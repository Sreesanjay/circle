import{r as t,j as e,a as S,u as w,bf as E,bg as L,m as _,i as y,Q as v,aP as F,L as U,E as C,aQ as O,bh as z,bi as M,bj as R,be as I}from"./index-pmEq7Yuw.js";import{M as f,g as B,f as b,F as D}from"./Toast-6H0IN-Wo.js";import{I as P}from"./ImageCrop-yAC4wBp7.js";import{U as T}from"./ProfileUpload--P1e-ApH.js";import{u as A,S as $}from"./Skeleton-B02KKpFb.js";import"./index.esm-aQxirg2M.js";import"./createBox-jd_sH9Hq.js";import"./extendSxProp-8dgyDS5A.js";function V({modalState:a,message:s,posText:r,negText:l,successCallback:i,cancelCallback:m}){const[d,u]=t.useState(a),o={width:"150px",height:"40px"};return e.jsx(e.Fragment,{children:e.jsxs(f,{show:d,size:"md",onClose:()=>u(!1),popup:!0,children:[e.jsx(f.Header,{}),e.jsx(f.Body,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(B,{className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:s}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(b,{color:"success",onClick:()=>{u(!1),i&&i()},style:o,children:r}),e.jsx(b,{color:"gray",onClick:()=>{u(!1),m&&m()},style:o,children:l})]})]})})]})})}function H({showUploadImage:a,setshowUploadImage:s}){const r=S(),{userProfile:l}=w(c=>c.user),[i,m]=t.useState(!1),[d,u]=t.useState(""),[o,h]=t.useState();t.useEffect(()=>{if(s(!1),o){const c=new File([o],"cover_img",{type:o.type});r(E(c))}},[o,r,s]);function g(){s(!1)}const p={width:"100%",height:"40px"},N={width:"100%",height:"40px",backgroundColor:"red"};function n(c){c.target.files&&(g(),u(URL.createObjectURL(c.target.files[0])),m(!0))}function x(){r(L()),g()}return e.jsxs(e.Fragment,{children:[e.jsx(P,{src:d,aspect:16/9,isCrop:i,setisCrop:m,setImage:h}),e.jsxs(f,{show:a,size:"md",onClose:g,popup:!0,children:[e.jsx(f.Header,{}),e.jsx(f.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Upload Cover Image"}),e.jsx("div",{children:e.jsx("div",{className:"mb-2",children:e.jsx(D,{id:"small-file-upload",sizing:"sm",style:p,onChange:n})})}),(l==null?void 0:l.cover_img)&&e.jsx("div",{className:"w-full",children:e.jsx(b,{style:N,onClick:x,children:"Delete"})})]})})]})]})}function Q({openModal:a,setOpenModal:s,title:r}){const[l,i]=t.useState([]),m=_(),d=t.useRef(!1),[u,o]=t.useState(!1),h=t.useRef(0),g=A(()=>p("")),p=t.useCallback(async n=>{o(!0);const x=r==="Following"?`/users/following?search=${n}&page=${h.current}`:`/users/followers?search=${n}&page=${h.current}`;try{const c=await y.get(x,{withCredentials:!0});c.data&&(h.current=h.current+1,d.current?(d.current=!1,i(c.data.userList)):i(j=>[...j,...c.data.userList])),o(!1)}catch(c){const j=c;v.error(j.message),o(!1)}},[r]);async function N(n){o(!0);try{(await y.post("/users/unfollow",{id:n},{withCredentials:!0})).data&&i(c=>c.filter(j=>j.user_id!==n)),o(!1)}catch(x){const c=x;v.error(c.message),o(!1)}}return t.useEffect(()=>{a&&(h.current=0,p(""))},[a,p]),e.jsxs(f,{show:a,size:"md",onClose:()=>{i([]),s(!1)},children:[e.jsx(f.Header,{children:e.jsx("div",{className:"space-y-6 text-center",children:r})}),e.jsx("div",{className:"h-screen overflow-y-scroll userList",ref:g,children:e.jsxs(f.Body,{children:[e.jsx("input",{type:"text",className:"rounded-md w-full",onChange:n=>{d.current=!0,h.current=0,p(n.target.value)}}),e.jsx("div",{className:"users-list",children:l&&l.map((n,x)=>e.jsxs("div",{className:"user-card my-4 bg-gray-100 p-2 rounded-md flex items-center gap-3 justify-between",children:[e.jsxs("div",{className:"left flex gap-3",onClick:()=>m(`/view-profile/${n.user_id}`),children:[n.profile_img?e.jsx("img",{src:n.profile_img,alt:"",className:"w-10 rounded-md"}):e.jsx("h1",{className:"p-2 px-4 rounded-md bg-gray-400",children:n.email[0].toUpperCase()}),e.jsxs("div",{className:"name",children:[e.jsx("h1",{children:n.username}),e.jsx("p",{className:"text-sm text-gray-600",children:n.fullname})]})]}),r==="Following"&&e.jsx("button",{className:"bg-primary hover:bg-primary-hover px-2 py-1 rounded-md text-white",onClick:()=>N(n.user_id),children:"Unfollow"})]},x))}),u&&e.jsx($,{})]})})]})}function q(){const[a,s]=t.useState(),[r,l]=t.useState(""),[i,m]=t.useState(!1);return t.useEffect(()=>{(async()=>{try{const d=await y.get("/profile/connection-count",{withCredentials:!0});d.data&&s({followers:d.data.connectionCount.followers,following:d.data.connectionCount.following})}catch(d){v(d.message)}})()},[]),e.jsxs("div",{className:"friend-list flex w-full justify-around sm-pe-7",children:[e.jsx(Q,{openModal:i,setOpenModal:m,title:r}),e.jsxs("div",{className:"wrapper flex flex-col items-center",onClick:()=>{l("Following"),m(!0)},children:[e.jsx("h1",{children:a==null?void 0:a.following}),e.jsx("h3",{children:"Following"})]}),e.jsxs("div",{className:"wrapper flex flex-col items-center",onClick:()=>{l("Followers"),m(!0)},children:[e.jsx("h1",{children:a==null?void 0:a.followers}),e.jsx("h3",{children:"Followers"})]})]})}function G(){const a=_(),[s,r]=t.useState([]);return t.useEffect(()=>{(async()=>{try{const l=await y.get("/users/close-friends",{withCredentials:!0});l.data&&r(l.data.userList)}catch(l){const i=l;v.error(i.message)}})()},[]),e.jsxs("div",{className:"flex gap-3",children:[s.length===0&&e.jsxs("div",{className:"flex flex-col gap-5 text-sm",children:[e.jsx("h1",{children:"You dont have any close friends"}),e.jsx("button",{className:"bg-gray-700 py-2 rounded-md",onClick:()=>a("/manage-account/close-friends"),children:"Add Close friends"})]}),s&&s.map((l,i)=>e.jsx("div",{className:"",children:l.profile_img?e.jsx("img",{src:l.profile_img,alt:"",className:"w-10 rounded-md"}):e.jsx("h1",{className:"p-2 px-4 rounded-md bg-gray-400",children:l.email[0].toUpperCase()})},i))]})}function Y(){const{user:a}=w(r=>r.auth),{userProfile:s}=w(r=>r.user);return e.jsx("div",{className:"md:grid md:grid-cols-6 h-full p-5",children:e.jsxs("div",{className:"profile-section col-span-4",children:[e.jsx("h1",{className:"font-medium text-lg mb-5",children:"View Profile"}),e.jsxs("div",{className:"wrapper grid grid-cols-4 mb-4",children:[e.jsx("h1",{className:"key font-medium col-span-4 sm:col-span-1",children:"Full Name"}),e.jsx("h1",{className:"value sm:col-span-3",children:s==null?void 0:s.fullname})]}),e.jsxs("div",{className:"wrapper grid grid-cols-4 mb-4",children:[e.jsx("h1",{className:"key font-medium col-span-4 sm:col-span-1",children:"Email"}),e.jsx("h1",{className:"value sm:col-span-3 text-sm",children:a==null?void 0:a.email})]}),e.jsxs("div",{className:"wrapper grid grid-cols-4 mb-4",children:[e.jsx("h1",{className:"key font-medium col-span-4 sm:col-span-1",children:"Username"}),e.jsx("h1",{className:"value sm:col-span-3 text-sm",children:s==null?void 0:s.username})]}),e.jsxs("div",{className:"wrapper grid grid-cols-4 mb-4",children:[e.jsx("h1",{className:"key font-medium col-span-4 sm:col-span-1",children:"Gender"}),e.jsx("h1",{className:"value sm:col-span-3 text-sm",children:s==null?void 0:s.gender})]}),e.jsxs("div",{className:"wrapper mb-4",children:[e.jsx("h1",{className:"key font-medium mb-2",children:"Bio"}),e.jsx("h1",{className:"value text-sm",children:s==null?void 0:s.bio})]})]})})}const J=t.lazy(()=>I(()=>import("./PostSection-lC8m4hCS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),W=t.lazy(()=>I(()=>import("./SavedSection-TucM3SyM.js"),__vite__mapDeps([16,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])));function re(){const a=S(),{userProfile:s,isLoading:r,isError:l,isSuccess:i,errorMessage:m}=w(k=>k.user),[d,u]=t.useState(!1),[o,h]=t.useState(!1),[g,p]=t.useState(!1),[N,n]=t.useState("hidden"),[x,c]=t.useState("PROFILE");t.useEffect(()=>{l?v(m):i&&(s||u(!0)),a(F())},[l,m,i,s,a]);function j(){v.success("profile updated")}return e.jsxs(e.Fragment,{children:[e.jsx(H,{showUploadImage:o,setshowUploadImage:h}),e.jsx(T,{showUploadProfile:g,setshowUploadProfile:p}),e.jsx(V,{modalState:d,message:"Profile updation pending. update now?",posText:"Update Now",negText:"Later",successCallback:j,cancelCallback:null}),r?e.jsx(U,{}):e.jsxs("section",{className:"user-profile flex flex-col items-center sm:items-start",children:[e.jsxs("section",{className:"cover-photo",children:[e.jsx("button",{onClick:()=>h(!0),className:"add-cover-btn p-2 shadow-lg",children:e.jsx(C,{size:25})}),s!=null&&s.cover_img?e.jsx("img",{src:s==null?void 0:s.cover_img,className:"object-cover"}):e.jsx("div",{className:"default-cover",children:e.jsx("img",{src:"https://images.fastcompany.net/image/upload/w_596,c_limit,q_auto:best,f_auto/wp-cms/uploads/2021/03/LinkedIn-Default-Background-2020-.jpg",alt:""})})]}),e.jsxs("section",{className:"header bg-gray-900 flex flex-col items-center sm:flex-row sm:items-end w-full pb-1 shadow-2xl",children:[e.jsxs("div",{className:"left-area sm:ms-20 pb-2",children:[e.jsxs("div",{className:"profile-img relative",onMouseOverCapture:()=>n("block"),onMouseOutCapture:()=>n("hidden"),children:[e.jsx("button",{className:`edit-profileImg w-full h-full absolute top-0 ${N}`,onClick:()=>p(!0),children:e.jsx(C,{size:30})}),s!=null&&s.profile_img?e.jsx("img",{src:s==null?void 0:s.profile_img,alt:"",className:"w-full shadow-lg rounded-md"}):e.jsx("img",{src:"https://static.vecteezy.com/system/resources/thumbnails/010/260/479/small/default-avatar-profile-icon-of-social-media-user-in-clipart-style-vector.jpg",alt:"",className:"w-full shadow-lg rounded-md"})]}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("h1",{className:"text-center mt-3 text-xl font-medium",children:s==null?void 0:s.username}),(s==null?void 0:s.isVerified)&&e.jsx("p",{className:"text-blue-600 text-xl",children:e.jsx(O,{})})]})]}),e.jsxs("div",{className:"right-nav grow ps-7 sm:ps-14 flex",children:[e.jsxs("div",{className:"flex flex-col items-center hover:bg-gray-700 rounded-md p-2 mt-2 sm:me-9",onClick:()=>c("PROFILE"),children:[e.jsx(z,{size:28}),e.jsx("h3",{className:"",children:"Profile"})]}),e.jsxs("div",{className:"flex flex-col items-center hover:bg-gray-700 rounded-md p-2 mt-2 sm:me-9",onClick:()=>c("POST"),children:[e.jsx(M,{size:28}),e.jsx("h3",{className:"",children:"Posts"})]}),e.jsxs("div",{className:"flex flex-col items-center hover:bg-gray-700 rounded-md p-2 mt-2 sm:me-9",onClick:()=>c("SAVED"),children:[e.jsx(R,{size:28}),e.jsx("h3",{className:"",children:"Saved"})]})]})]}),e.jsxs("section",{className:"profile-body min-h-screen w-full md:grid md:grid-cols-12",children:[e.jsxs("div",{className:"left-section col-span-3 px-5 bg-gray-800 shadow-xl pt-5",children:[e.jsx(q,{}),e.jsx("hr",{className:"my-3"}),e.jsx("div",{className:"flex items-center mb-3 justify-between",children:e.jsx("h1",{className:"font-medium text-center",children:"Close Friends"})}),e.jsx(G,{})]}),e.jsxs("div",{className:"right-section col-span-9 pt-5 px-3",children:[x==="PROFILE"&&e.jsx(Y,{}),x==="POST"&&e.jsx(J,{}),x==="SAVED"&&e.jsx(W,{})]})]})]})]})}export{re as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/PostSection-lC8m4hCS.js","assets/index-pmEq7Yuw.js","assets/index-a4UJhlCh.css","assets/PostModal-Cs0ExwpB.js","assets/Toast-6H0IN-Wo.js","assets/index.esm-aQxirg2M.js","assets/index.esm-8ccw83Dp.js","assets/usehandleError-512Yb8SV.js","assets/Badge-YyqtoQF9.js","assets/Typography-wyi_OAB2.js","assets/extendSxProp-8dgyDS5A.js","assets/PostModal-qOpLdxIh.css","assets/Skeleton-B02KKpFb.js","assets/createBox-jd_sH9Hq.js","assets/Skeleton-KofQWI2B.css","assets/ImageListItem-Jdc85P35.js","assets/SavedSection-TucM3SyM.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
