import{i as n,Q as s,a9 as i,a6 as d,a7 as l,a8 as u,a$ as p}from"./index-AlnpICX-.js";async function f(a){var t;try{const r=await n.post("/chat",{user_id:a},{withCredentials:!0});if(r.data)return r.data.chat;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function y(a){var t;try{const r=await n.post("/chat/group",a,{withCredentials:!0});if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function E(){var a;try{const t=await n.get("/chat",{withCredentials:!0});if(t.data)return t.data.chats;throw new Error("Internal Error")}catch(t){const r=t;s.error((a=r.response)==null?void 0:a.data.message)}}async function C(a){var t;try{const r=await n.post("/message",a,{withCredentials:!0});if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function I(a,t){var r;try{const e=await n.get(`/message/${a}?page=${t||""}`,{withCredentials:!0});if(e.data)return e.data;throw new Error("Internal Error")}catch(e){const o=e;s.error((r=o.response)==null?void 0:r.data.message)}}async function $(a){var t;try{const r=await n.put(`/message/read/${a}`,{},{withCredentials:!0});if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function b({chat_name:a,chat_id:t}){var r;try{const e=await n.put(`/chat/chat_name/${t}`,{chat_name:a},{withCredentials:!0});if(e.data)return e.data;throw new Error("Internal Error")}catch(e){const o=e;s.error((r=o.response)==null?void 0:r.data.message)}}async function M({chat_id:a,user:t}){var r;try{const e=await n.put(`/chat/members/${a}`,{user:t},{withCredentials:!0});if(e.data)return e.data;throw new Error("Internal Error")}catch(e){const o=e;s.error((r=o.response)==null?void 0:r.data.message)}}async function R({chat_id:a,user:t}){var r;try{const e=await n.put(`/chat/members/remove/${a}`,{user:t},{withCredentials:!0});if(e.data)return e.data;throw new Error("Internal Error")}catch(e){const o=e;s.error((r=o.response)==null?void 0:r.data.message)}}async function k(a){var t;try{const r=await n.get(`/chat/members/is-blocked/${a}`,{withCredentials:!0});if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function D(a){var t;try{const r=await n.delete(`/message/${a}`,{withCredentials:!0});if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function F({chat_id:a,icon:t}){var r;try{const e=new File([t],"groupIocn",{type:t.type}),o=new Date().getTime()+e.name,c=d(i,"groupIcon/"+o);if(await l(c,e)){const h=await u(c);if(h){const w=await n.put(`/chat/icon/${a}`,{icon:h},{withCredentials:!0});if(w.data)return w.data;throw new Error("Internal Error")}}}catch(e){const o=e;s.error((r=o.response)==null?void 0:r.data.message)}}async function j(a){var t;try{const r=new Date().getTime()+a.name,e=d(i,"message/"+r);if(await l(e,a)){const c=await u(e);if(c)return c;throw new Error("can't upload the file")}}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function v(a){var t;try{const r=d(i,a);p(r)}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}async function B(a){var t;try{const r=await n.get(`/chat/get-chat/${a}`);if(r.data)return r.data;throw new Error("Internal Error")}catch(r){const e=r;s.error((t=e.response)==null?void 0:t.data.message)}}export{b as a,M as b,F as c,$ as d,v as e,D as f,I as g,C as h,k as i,y as j,E as k,f as l,B as m,R as r,j as s};
