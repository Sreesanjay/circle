import{m as u,j as e,r as o,i as c,Q as n,A as p}from"./index-smUx3BSe.js";import{M as j,L as g}from"./ManageAccSidebar-fim9QCJ2.js";import{M as f,B as h}from"./Toast-nm33oYh4.js";import"./index.esm-MxRIW45I.js";import"./Menu-cs__0NOm.js";import"./index.esm-1U0CRIgX.js";function w({user:a,removeCloseFriend:d}){const i=u();return e.jsx("div",{className:"user-profile-card shadow-md ",style:{width:"230px"},children:e.jsxs("div",{className:"close-friend-card bg-gray-900 rounded-md flex flex-col items-center w-56 shadow-md p-3",children:[e.jsx("div",{className:"header w-32 rounded-md mb-3 hover:scale-105",onClick:()=>i(`/view-profile/${a.user_id}`),children:a.profile_img?e.jsx("img",{src:a.profile_img,alt:"",className:"rounded-lg"}):e.jsx("h1",{className:"text-9xl text-center absolute bottom-20 left-16",children:a.email[0]})}),e.jsx("h1",{className:"mb-5",children:a.username}),e.jsx("button",{className:"bg-white text-primary px-5 py-1 rounded-md hover:bg-slate-100",onClick:()=>d(a.user_id),children:"Remove"})]})})}function b({openModal:a,setOpenModal:d}){const[i,l]=o.useState();o.useEffect(()=>{(async()=>{try{const s=await c.get("/users/get-following",{withCredentials:!0});s.data&&l(s.data.userList)}catch(s){const r=s;n.error(r.message)}})()},[a]);async function m(s){try{const r=await c.post("/users/add-closefriend",{id:s},{withCredentials:!0});r.data&&(n(r.data.message),l(t=>t==null?void 0:t.filter(x=>x.user_id!==s)))}catch(r){const t=r;n.error(t.message)}}return e.jsxs(f,{show:a,size:"md",onClose:()=>{l([]),d(!1)},children:[e.jsx(f.Header,{children:"Add Close Friends"}),e.jsxs(f.Body,{children:[e.jsx("h1",{className:"mb-7",children:"Your followings"}),i==null?void 0:i.map(s=>e.jsxs("div",{className:"mb-5 flex justify-between",children:[e.jsxs("div",{className:"left flex gap-3",children:[s.profile_img?e.jsx("img",{src:s.profile_img,alt:"",className:"w-10 rounded-md"}):e.jsx("h1",{className:"p-2 px-4 rounded-md bg-gray-400",children:s.email[0].toUpperCase()}),e.jsxs("div",{className:"name",children:[e.jsx("h1",{children:s.username}),e.jsx("p",{className:"text-sm text-gray-600",children:s.fullname})]})]}),e.jsx("div",{className:"button",children:e.jsx("button",{className:"bg-primary hover:bg-primary-hover p-1 px-5 rounded-md",onClick:()=>m(s.user_id),children:"Add"})})]},s.user_id))]})]})}function A(){const[a,d]=o.useState([]),[i,l]=o.useState(!1);async function m(s){try{const r=await c.delete(`/users/close-friend/${s}`,{withCredentials:!0});r.data&&(n(r.data.message),d(t=>t.filter(x=>x.user_id!==s)))}catch(r){const t=r;n.error(t.message)}}return o.useEffect(()=>{(async()=>{try{const s=await c.get("/users/close-friends",{withCredentials:!0});s.data&&d(s.data.userList)}catch(s){const r=s;n.error(r.message)}})()},[i]),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(j,{}),e.jsxs("div",{className:"px-5 sm:ms-64",children:[e.jsxs("div",{className:"header w-full flex justify-between items-center",children:[e.jsx(h,{"aria-label":"Default breadcrumb example",children:e.jsx(h.Item,{icon:g,children:"Close Friends"})}),e.jsx("div",{onClick:()=>l(!0),children:e.jsx(p,{size:45})}),e.jsx(b,{openModal:i,setOpenModal:l})]}),e.jsx("div",{className:"close-friends py-5 flex gap-3 flex-wrap justify-center sm:justify-start",children:a&&a.map(s=>e.jsx(w,{user:s,removeCloseFriend:m}))})]})]})}export{A as default};
