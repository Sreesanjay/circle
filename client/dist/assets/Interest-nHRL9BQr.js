import{a as k,u as S,r,b6 as M,b7 as C,Q as L,j as e,L as F,b8 as U,b9 as q,ba as O,D as P,bb as Q,bc as R}from"./index-m-eWRAVj.js";import{M as h,A as H,H as _,b as g,F as B,c as T,d as z,f as b,g as V,B as D}from"./Toast-KVdhVArs.js";import{A as Y}from"./AdminSidebar-aX9fpIq8.js";import{d as G}from"./index.esm-IW_VCk-f.js";import{u as I}from"./formValidate-Cjawh5Gv.js";import"./index.esm-5AkatTaU.js";import"./Menu-ML_fOrjv.js";import"./index.esm-XQb_oNS5.js";function J({showModal:s,setShowModal:t}){const n=k(),{isError:l,isSuccess:x,isLoading:m,errorMessage:d,status:c}=S(j=>j.interest),[i,a]=r.useState({image:void 0,interest:"",discription:""}),[f,N]=r.useState(!1),[o,u]=r.useState({image:"",interest:"",discription:""});function v(j){var E;const{name:p,value:w}=j.target;p=="image"&&j.target instanceof HTMLInputElement?a({...i,image:(E=j.target.files)==null?void 0:E[0]}):a({...i,[p]:w})}function y(){u({...i,image:I("image",i.image),interest:I("interest",i.interest),discription:I("discription",i.discription)}),N(!0)}return r.useEffect(()=>{f&&!o.image&&!o.discription&&!o.interest&&(n(M(i)),N(!1))},[o,f,t,n,i]),r.useEffect(()=>{x?(a({image:void 0,interest:"",discription:""}),n(C()),t(!1)):l&&c!==409&&(L(d),n(C()))},[l,t,n,x,d,c]),e.jsx(e.Fragment,{children:m?e.jsx(F,{}):e.jsxs(h,{show:s,size:"md",onClose:()=>{a({image:void 0,interest:"",discription:""}),t(!1)},popup:!0,children:[e.jsx(h.Header,{}),e.jsx(h.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Add new interest"}),e.jsxs("div",{children:[l&&c===409?e.jsxs(H,{color:"failure",icon:_,children:[e.jsx("span",{className:"font-medium",children:"Alert!"})," ",d]}):null,e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"file-upload",value:"Upload file"})}),o.image&&e.jsx("span",{className:"text-red-700",children:o.image}),e.jsx(B,{id:"file-upload",name:"image",style:{height:"40px"},onChange:v})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"email1",value:"Interest"})}),o.interest&&e.jsx("span",{className:"text-red-700",children:o.interest}),e.jsx(T,{id:"interest",name:"interest",type:"text",onChange:v,value:i.interest,placeholder:"Enter interest name",style:{height:"40px"},required:!0})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"discription",value:"Discription"})}),o.discription&&e.jsx("span",{className:"text-red-700",children:o.discription}),e.jsx(z,{id:"discription",name:"discription",value:i.discription,onChange:v,placeholder:"Enter small discription about it",required:!0,rows:4})]}),e.jsxs("div",{className:"w-full flex",children:[e.jsx(b,{style:{height:"40px",width:"100px"},className:"bg-red-600",onClick:()=>{a({image:void 0,interest:"",discription:""}),t(!1)},children:"Cancel"}),e.jsx(b,{style:{height:"40px",width:"100px"},className:"ms-3 bg-primary",onClick:y,children:"Add"})]}),e.jsx("div",{className:"flex justify-between text-sm font-medium text-gray-500 dark:text-gray-300"})]})})]})})}function K({showModal:s,setShowModal:t,interest:n}){const l=k(),{isError:x,isSuccess:m,isLoading:d,errorMessage:c,status:i}=S(p=>p.interest),[a,f]=r.useState({image:void 0,interest:n.interest,discription:n.discription,_id:n._id}),[N,o]=r.useState(!1),[u,v]=r.useState({interest:"",discription:""});function y(p){var A;const{name:w,value:E}=p.target;w=="image"&&p.target instanceof HTMLInputElement?f({...a,image:(A=p.target.files)==null?void 0:A[0]}):f({...a,[w]:E})}function j(){v({...a,interest:I("interest",a.interest),discription:I("discription",a.discription)}),o(!0)}return r.useEffect(()=>{N&&!u.discription&&!u.interest&&(l(U(a)),o(!1))},[u,N,t,l,a]),r.useEffect(()=>{m?(l(C()),t(!1)):x&&i!==409&&(L(c),l(C()))},[x,t,l,m,c,i]),e.jsx(e.Fragment,{children:d?e.jsx(F,{}):e.jsxs(h,{show:s,size:"md",onClose:()=>{f({image:void 0,interest:"",discription:"",_id:""}),t(!1)},popup:!0,children:[e.jsx(h.Header,{}),e.jsx(h.Body,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white",children:"Add new interest"}),e.jsxs("div",{children:[x&&i===409?e.jsxs(H,{color:"failure",icon:_,children:[e.jsx("span",{className:"font-medium",children:"Alert!"})," ",c]}):null,e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"file-upload",value:"Upload file"})}),e.jsx(B,{id:"file-upload",name:"image",style:{height:"40px"},onChange:y})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"email1",value:"Interest"})}),u.interest&&e.jsx("span",{className:"text-red-700",children:u.interest}),e.jsx(T,{id:"interest",name:"interest",type:"text",onChange:y,value:a.interest,placeholder:"Enter interest name",style:{height:"40px"},required:!0})]}),e.jsxs("div",{className:"max-w-md",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(g,{htmlFor:"discription",value:"Discription"})}),u.discription&&e.jsx("span",{className:"text-red-700",children:u.discription}),e.jsx(z,{id:"discription",name:"discription",value:a.discription,onChange:y,placeholder:"Enter small discription about it",required:!0,rows:4})]}),e.jsxs("div",{className:"w-full flex",children:[e.jsx(b,{style:{height:"40px",width:"100px"},className:"bg-red-600",onClick:()=>{f({image:void 0,interest:"",discription:"",_id:""}),t(!1)},children:"Cancel"}),e.jsx(b,{style:{height:"40px",width:"100px"},className:"ms-3 bg-primary",onClick:j,children:"Add"})]}),e.jsx("div",{className:"flex justify-between text-sm font-medium text-gray-500 dark:text-gray-300"})]})})]})})}function W({interest:s}){const t=k(),[n,l]=r.useState(!1),[x,m]=r.useState(!1),[d,c]=r.useState(!1),i={width:"150px",height:"40px"};function a(){m(!0)}return r.useEffect(()=>{d&&(t(q(s._id)),c(!1))},[d,t,s]),e.jsxs("div",{className:"interest-container w-full bg-gray-900 shadow-md rounded-lg p-2 flex flex-col items-center sm:items-start sm:grid sm:grid-cols-12 mt-5",children:[e.jsx("img",{src:s==null?void 0:s.image,alt:"",className:"rounded-lg col-span-12 sm:col-span-6 lg:col-span-2"}),e.jsxs("div",{className:"col-span-12 sm:col-span-6 lg:col-span-3 ms-4 mt-4",children:[e.jsx("h1",{className:"text-4xl mb-3",children:s.interest}),e.jsx("p",{className:"text-sm",children:s.discription})]}),e.jsxs("div",{className:"analytic col-span-12 lg:col-span-6  flex justify-around",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"font-medium mb-10 mt-5",children:"Total Users"}),e.jsx("h1",{className:"text-5xl",children:s.total_users})]}),e.jsxs("div",{className:" flex flex-col items-center",children:[e.jsx("h1",{className:"font-medium mb-10 mt-5",children:"Total Communities"}),e.jsx("h1",{className:"text-5xl",children:s.total_community})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"font-medium mb-10 mt-5",children:"Total Posts"}),e.jsx("h1",{className:"text-5xl",children:s.total_posts})]})]}),e.jsxs("div",{className:"manage-btn flex absolute right-5",children:[e.jsx("div",{onClick:()=>l(!0),children:e.jsx(O,{size:25})}),e.jsx("div",{onClick:a,children:e.jsx(P,{size:25})}),e.jsx(K,{showModal:n,setShowModal:l,interest:s}),e.jsxs(h,{show:x,size:"md",onClose:()=>m(!1),popup:!0,children:[e.jsx(h.Header,{}),e.jsx(h.Body,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(V,{className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:"Are you sure you want to delete this Interest"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(b,{color:"success",onClick:()=>{m(!1),c(!0)},style:i,children:"Yes, I'm sure"}),e.jsx(b,{color:"failure",onClick:()=>m(!1),style:i,children:"No, cancel"})]})]})})]})]})]})}function re(){const[s,t]=r.useState(!1),{interest:n,isLoading:l,isSuccess:x,isError:m}=S(c=>c.interest),d=k();return r.useEffect(()=>{d(Q())},[d]),r.useEffect(()=>{(x||m)&&d(C())},[x,m,d]),e.jsx(e.Fragment,{children:l?e.jsx(F,{}):e.jsxs("div",{className:"",children:[e.jsx(J,{showModal:s,setShowModal:t}),e.jsx(Y,{}),e.jsxs("div",{className:"interest md:ms-80 p-5",children:[e.jsx(D,{"aria-label":"Default breadcrumb example",children:e.jsx(D.Item,{icon:G,children:e.jsx(R,{to:"/admin/interest",children:"Interest"})})}),e.jsxs("header",{className:"header py-5 flex justify-between",children:[e.jsx("h1",{className:"text-xl font-medium",children:"Interest"}),e.jsx("button",{className:"button bg-primary px-3 py-2 rounded-sm font-medium",onClick:()=>t(!0),children:"New Interest"})]}),n==null?void 0:n.map(c=>e.jsx(W,{interest:c}))]})]})})}export{re as default};
